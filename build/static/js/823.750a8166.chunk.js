"use strict";(self.webpackChunkgenetous_manage_apps=self.webpackChunkgenetous_manage_apps||[]).push([[823],{5091:(e,t,a)=>{a.r(t),a.d(t,{Applications:()=>g,default:()=>u});var s=a(2791),i=a(4846),o=a(710),n=a(4889),r=a(9642),c=a(4880),l=a(1523),p=a(577),d=(a(5462),a(8983)),h=a(184);var m="Unexpected Error Occured!";class g extends s.Component{constructor(e){super(e),this.state={applications:[],modalVisible:!1,file:[],application:{collectionName:"application",content:{applicationName:"",applicationIcon:"",applicationCreatedDate:0,uniqueFields:["applicationName"]}},redirect:!1,appCreateStarted:!1}}handleRedirect(){this.state.redirect||this.setState({redirect:!0})}componentDidMount(){this.getApplications()}async getApplications(){var e={where:{and:{relationName:"organizationRelations",collectionId:localStorage.getItem("orgId")}},related:{collectionName:"application",sort:{applicationName:"asc"}}},t=[...this.state.applications],a=!0;if(await(0,n.Rd)(e,n.fq.GetApplications).then((function(e){e.results.length>0&&e.results[0].data.length>0&&(t=e.results[0].data[0].related.application)}),(e=>{401==e.status?this.handleRedirect():(a=!1,m=e.message)})),!a){var s=a?"success":"error";this.toastShow(s,m)}this.setState({applications:t})}toastShow(e,t){switch(e){case"success":p.Am.success(t,{position:"bottom-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,theme:"dark",transition:p.Mi});break;case"error":p.Am.error(t,{position:"bottom-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,theme:"dark",transition:p.Mi});break;case"info":p.Am.info(t,{position:"bottom-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,theme:"dark",transition:p.Mi})}}appItemChange(e){const{application:t}=this.state;t.content[e.target.name]=e.target.value,this.setState({application:t})}async fileChanged(e){if(e.target.files.length>0){var t=e.target.files;t.length>0&&await this.setState({file:t})}else await this.setState({file:[]})}setModalVisible(e,t){this.setState({modalVisible:e})}async deleteApp(e){var t={where:{or:{id:[e]}}};return await(0,n.Rd)(t,n.fq.DeleteCollection).then((function(e){}),(e=>{})),!0}setAppID(e,t){localStorage.setItem("appId",e.target.name)}async logOut(e){var t=!1;return await(0,n.kS)().then((function(e){t=!0}),(e=>{401==e.status?t=!0:m=e.message})),t?(localStorage.removeItem("token"),localStorage.removeItem("clientId"),localStorage.removeItem("organizationId"),localStorage.removeItem("applicationId"),localStorage.removeItem("appId"),localStorage.removeItem("orgId"),delete n.cO.clientId,this.setState({redirect:!0})):this.toastShow("error",m),!1}toastShow(e,t){switch(e){case"success":p.Am.success(t,{position:"bottom-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,theme:"dark",transition:p.Mi});break;case"error":p.Am.error(t,{position:"bottom-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,theme:"dark",transition:p.Mi});break;case"info":p.Am.info(t,{position:"bottom-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,theme:"dark",transition:p.Mi})}}render(){const{redirect:e}=this.state;return e?(0,h.jsx)(c.l_,{to:"/login"}):(0,h.jsxs)(d.KB,{className:"p-5",children:[(0,h.jsx)(p.Ix,{}),(0,h.jsx)(d.rb,{className:"justify-content-center",children:(0,h.jsx)(d.b7,{className:"text-center p-5",children:(0,h.jsxs)(d.tj,{children:["OrganizationId : ",localStorage.getItem("orgId")]})})}),(0,h.jsx)(d.rb,{className:"justify-content-center",children:this.state.applications.map(((e,t)=>(0,h.jsx)(d.b7,{sm:3,children:(0,h.jsx)(d.xH,{className:"text-center",children:(0,h.jsxs)(d.sl,{children:[(0,h.jsx)(d.tj,{children:e.content.applicationName}),(0,h.jsxs)(d.uS,{children:["ApplicationId : ",e.content.applicationId]}),(0,h.jsxs)(d.uS,{children:["Created Date : ",(0,r.Z)(e.content.applicationCreatedDate,"dd.MM.yyyy")]}),(0,h.jsx)(l.rU,{to:"/",name:e.content.applicationId,onClick:this.setAppID.bind(this),children:(0,h.jsx)(d.u5,{name:e.content.applicationId,href:"#",children:"Go to Panel"})})]})})})))}),(0,h.jsx)(d.rb,{className:"justify-content-center",children:(0,h.jsx)(d.b7,{className:"text-center p-5",children:(0,h.jsxs)(d.u5,{onClick:this.logOut.bind(this),children:[(0,h.jsx)(i.Z,{icon:o.V})," Logout "]})})})]})}}const u=g}}]);
//# sourceMappingURL=823.750a8166.chunk.js.map