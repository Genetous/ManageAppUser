"use strict";(self.webpackChunkgenetous_manage_apps=self.webpackChunkgenetous_manage_apps||[]).push([[129],{6661:(e,s,t)=>{t.r(s),t.d(s,{default:()=>S,osService:()=>f});var i=t(2791),l=(t(4846),t(4889)),a=t(577),o=(t(6898),t(5462),t(8983)),n=t(184);const r={cursor:"pointer",color:"rgb(33, 37, 41)","background-color":"#fff"},d={color:"#f7f2f2"},c={float:"right"},h={height:"620px","overflow-y":"scroll"};class u extends i.Component{constructor(e){super(e),this.state={uploadRules:[],activeKey:1,activeSubKeys:[1,1,1,1,1],subKeys:[],changedTypes:[],visible:!1,yesNoVisible:!1,yesNoQuestion:"",arguments:[],sendType:""}}setSubActiveKey(e,s){const{subKeys:t}=this.state;var i=t.findIndex((e=>e.id===s));return t[i].activeKey=e,this.setState({subKeys:t}),!1}getSubActiveKey(e,s,t){const{subKeys:i}=this.state;var l=i.findIndex((e=>e.id===t));return s==i[l].activeKey}componentDidMount(){this.getUploadRules()}async getUploadRules(){var e={organizationId:localStorage.getItem("orgId"),applicationId:localStorage.getItem("appId"),service:"osService",methodContentType:"other",methodType:"upload"},s=this.state.uploadRules;s=await this.props.getRules(e);var t=[];s.length>0&&s[0].roleRules.permissions.map((e=>{var s={id:e._id,activeKey:1};t.push(s)}));this.setState({uploadRules:s,subKeys:t})}setVisible(e){this.setState({visible:e})}async setYesNoVisible(e,s,t,i,l){if(e)this.setState({yesNoVisible:e,yesNoQuestion:s,sendType:t,arguments:i});else{if(l)switch(this.state.sendType){case"deleteRole":await this.deleteRole(this.state.arguments);break;case"saveAll":await this.addUpdateRule()}this.setState({yesNoVisible:e,yesNoQuestion:"",sendType:"",arguments:[]})}}async newRuleAdd(){this.setVisible(!1),this.props.toastShow("info","Processing....");var e=document.getElementById("newrule");if(!e.value)return this.props.toastShow("error","Role Name cannot be null or empty!"),!1;var s={organizationId:localStorage.getItem("orgId"),applicationId:localStorage.getItem("appId"),rules:[{method:"/osservice/upload",methodType:"upload",methodContentType:"other",service:"osService",permissions:[{role:e.value,permitted:{extensions:[]},nonPermitted:{extensions:[]}}]}]};await this.props.newRuleAdd(s),this.getUploadRules()}async addUpdateRule(){this.setVisible(!1),this.props.toastShow("info","Processing....");var e=[...this.state.uploadRules][0].roleRules,s={method:e.method,methodType:e.methodType,methodContentType:e.methodContentType,service:e.service,permissions:e.permissions},t={organizationId:localStorage.getItem("orgId"),applicationId:localStorage.getItem("appId"),rules:[s]};this.props.addUpdateRule(t)}async deleteRole(e){this.setVisible(!1),this.props.toastShow("info","Processing....");var s=e[0],t=e[1],i={organizationId:localStorage.getItem("orgId"),applicationId:localStorage.getItem("appId"),id:s};if(await this.props.deleteRole(i)){var l=[...this.state.uploadRules];l[0].roleRules.permissions.splice(t,1),this.setState({uploadRules:l})}}addExt(e,s,t){var i=[...this.state.uploadRules],l=i[0].roleRules.permissions[e][s].extensions;if(t.target.value.toString().indexOf(",")>=0){var a=this.getValueAsArrayByType(t.target.value,"string");a[0]&&l.indexOf(a[0])<0&&l.push(a[0]),t.target.value=""}this.setState({uploadRules:i}),this.props.setData(this.props.position,!0)}getExt(e,s,t,i){return(0,n.jsxs)("p",{className:"p-1 rounded border border-primary text-primary",children:[e,(0,n.jsxs)("span",{style:c,children:[" ",(0,n.jsx)("button",{type:"button",onClick:this.removeExt.bind(this,s,t,i),class:"btn-close","aria-label":"Close"})]})]})}removeExt(e,s,t,i){var l=[...this.state.uploadRules];l[0].roleRules.permissions[e][t].extensions.splice(s,1),this.setState({uploadRules:l}),this.props.setData(this.props.position,!0)}getValueAsArrayByType(e,s){var t=[];if(e.toString().indexOf(",")>=0){var i=e.split(",");switch(s){case"string":t=i;break;case"number":i.map((e=>{t.push(parseInt(e))}))}}else switch(s){case"string":e&&t.push(e);break;case"number":isNaN(e)||t.push(e)}return t}render(){return(0,n.jsxs)(o.xH,{children:[(0,n.jsxs)(o.rb,{className:"m-2 border-bottom d-flex align-items-center",children:[(0,n.jsx)(o.b7,{className:"col-8 pb-2",children:(0,n.jsxs)(o.tj,{children:["Add/Update ",(0,n.jsx)("b",{children:'"Object Storage Service Upload"'})," Permissions"]})}),(0,n.jsxs)(o.b7,{className:"col-4 d-grid gap-2 d-md-flex justify-content-md-end pb-2",children:[(0,n.jsx)(o.u5,{color:"secondary",onClick:this.setVisible.bind(this,!0),children:"Add New Role"}),(0,n.jsx)(o.u5,{color:"info",style:{color:"#fff"},onClick:this.setYesNoVisible.bind(this,!0,"Are you sure you want to save all?","saveAll",[this]),children:"Save All"})]}),(0,n.jsxs)(o.Tk,{visible:this.state.visible,onClose:this.setVisible.bind(this,!1),children:[(0,n.jsx)(o.p0,{children:(0,n.jsx)(o.fl,{children:"Add New Role"})}),(0,n.jsx)(o.sD,{children:(0,n.jsx)(o.jO,{type:"text",placeholder:"Role Name",name:"newRule",id:"newrule"})}),(0,n.jsxs)(o.Ym,{children:[(0,n.jsx)(o.u5,{color:"secondary",onClick:this.setVisible.bind(this,!1),children:"Close"}),(0,n.jsx)(o.u5,{color:"primary",onClick:this.newRuleAdd.bind(this),children:"Create Role"})]})]}),(0,n.jsxs)(o.Tk,{visible:this.state.yesNoVisible,onClose:this.setYesNoVisible.bind(this,!1),children:[(0,n.jsx)(o.p0,{children:(0,n.jsx)(o.fl,{children:this.state.yesNoQuestion})}),(0,n.jsxs)(o.Ym,{children:[(0,n.jsx)(o.u5,{color:"secondary",onClick:this.setYesNoVisible.bind(this,!1,null,null,null,!1),children:"No"}),(0,n.jsx)(o.u5,{color:"primary",onClick:this.setYesNoVisible.bind(this,!1,null,null,null,!0),children:"Yes"})]})]})]}),(0,n.jsx)(o.sl,{style:h,children:this.state.uploadRules.length>0&&this.state.uploadRules[0].roleRules.permissions.map(((e,s)=>(0,n.jsx)(o.xH,{className:"mt-1",children:(0,n.jsxs)(o.sl,{children:[(0,n.jsxs)(o.tj,{children:[(0,n.jsxs)("b",{children:['"',e.role,'"']})," Rules  ",(0,n.jsx)("span",{style:c,children:(0,n.jsx)(o.u5,{color:"danger",onClick:this.setYesNoVisible.bind(this,!0,"Are you sure you want to delete "+e.role+" role?","deleteRole",[e._id,s,this]),style:d,children:"Delete Role"})})]}),(0,n.jsxs)(o.n2,{variant:"tabs",className:"mt-4",role:"tablist",style:r,children:[(0,n.jsx)(o.U6,{children:(0,n.jsx)(o.AQ,{style:r,active:this.getSubActiveKey(this,1,e._id),onClick:this.setSubActiveKey.bind(this,1,e._id),children:"Permitted"})}),(0,n.jsx)(o.U6,{children:(0,n.jsx)(o.AQ,{style:r,active:this.getSubActiveKey(this,2,e._id),onClick:this.setSubActiveKey.bind(this,2,e._id),children:"Non-Permitted"})})]}),(0,n.jsxs)(o.gr,{children:[(0,n.jsx)(o.IA,{role:"tabpanel",className:"p-3","aria-labelledby":"home-tab",visible:this.getSubActiveKey(this,1,e._id),children:(0,n.jsxs)(o.xH,{className:"mt-2",children:[(0,n.jsx)(o.bn,{children:(0,n.jsx)(o.tj,{className:"p-2",children:"Extensions"})}),(0,n.jsxs)(o.sl,{children:[(0,n.jsx)(o.rb,{className:"mt-2 pb-2",children:(0,n.jsx)(o.b7,{className:"col-9",children:(0,n.jsx)(o.jO,{type:"text",name:"extension",onChange:this.addExt.bind(this,s,"permitted"),placeholder:"Extensions with comma"})})}),(0,n.jsx)(o.rb,{className:"mt-2",children:e.permitted.extensions.map(((e,t)=>(0,n.jsx)(o.b7,{className:"col-3",children:this.getExt(e,s,t,"permitted")})))})]})]})}),(0,n.jsx)(o.IA,{role:"tabpanel",className:"p-3","aria-labelledby":"profile-tab",visible:this.getSubActiveKey(this,2,e._id),children:(0,n.jsxs)(o.xH,{className:"mt-2",children:[(0,n.jsx)(o.bn,{children:(0,n.jsx)(o.tj,{className:"p-2",children:"Extensions"})}),(0,n.jsxs)(o.sl,{children:[(0,n.jsx)(o.rb,{className:"mt-2 pb-2",children:(0,n.jsx)(o.b7,{className:"col-9",children:(0,n.jsx)(o.jO,{type:"text",name:"extension",onChange:this.addExt.bind(this,s,"nonPermitted"),placeholder:"Extensions with comma"})})}),(0,n.jsx)(o.rb,{className:"mt-2",children:e.nonPermitted.extensions.map(((e,t)=>(0,n.jsx)(o.b7,{className:"col-3",children:this.getExt(e,s,t,"nonPermitted")})))})]})]})})]})]})})))})]})}}const p=u,m={cursor:"pointer",color:"rgb(33, 37, 41)","background-color":"#fff"},b={color:"#f7f2f2"},x={float:"right"},y={height:"620px","overflow-y":"scroll"};class g extends i.Component{constructor(e){super(e),this.state={secureDownloadRules:[],activeKey:1,activeSubKeys:[1,1,1,1,1],subKeys:[],changedTypes:[],visible:!1,yesNoVisible:!1,yesNoQuestion:"",arguments:[],sendType:""}}setSubActiveKey(e,s){const{subKeys:t}=this.state;var i=t.findIndex((e=>e.id===s));return t[i].activeKey=e,this.setState({subKeys:t}),!1}getSubActiveKey(e,s,t){const{subKeys:i}=this.state;var l=i.findIndex((e=>e.id===t));return s==i[l].activeKey}componentDidMount(){this.getsecureDownloadRules()}async getsecureDownloadRules(){var e={organizationId:localStorage.getItem("orgId"),applicationId:localStorage.getItem("appId"),service:"osService",methodContentType:"other",methodType:"download"},s=this.state.secureDownloadRules;s=await this.props.getRules(e);var t=[];s.length>0&&s[0].roleRules.permissions.map((e=>{var s={id:e._id,activeKey:1};t.push(s)}));this.setState({secureDownloadRules:s,subKeys:t})}setVisible(e){this.setState({visible:e})}async setYesNoVisible(e,s,t,i,l){if(e)this.setState({yesNoVisible:e,yesNoQuestion:s,sendType:t,arguments:i});else{if(l)switch(this.state.sendType){case"deleteRole":await this.deleteRole(this.state.arguments);break;case"saveAll":await this.addUpdateRule()}this.setState({yesNoVisible:e,yesNoQuestion:"",sendType:"",arguments:[]})}}async newRuleAdd(){this.setVisible(!1),this.props.toastShow("info","Processing....");var e=document.getElementById("newrule");if(!e.value)return this.props.toastShow("error","Role Name cannot be null or empty!"),!1;var s={organizationId:localStorage.getItem("orgId"),applicationId:localStorage.getItem("appId"),rules:[{method:"/osservice/download/secure",methodType:"download",methodContentType:"other",service:"osService",permissions:[{role:e.value,permitted:{extensions:[],fileNames:[]},nonPermitted:{extensions:[],fileNames:[]}}]}]};await this.props.newRuleAdd(s),this.getsecureDownloadRules()}async addUpdateRule(){this.setVisible(!1),this.props.toastShow("info","Processing....");var e=[...this.state.secureDownloadRules][0].roleRules,s={method:e.method,methodType:e.methodType,methodContentType:e.methodContentType,service:e.service,permissions:e.permissions},t={organizationId:localStorage.getItem("orgId"),applicationId:localStorage.getItem("appId"),rules:[s]};await this.props.addUpdateRule(t)}async deleteRole(e){this.setVisible(!1),this.props.toastShow("info","Processing....");var s=e[0],t=e[1],i={organizationId:localStorage.getItem("orgId"),applicationId:localStorage.getItem("appId"),id:s};if(await this.props.deleteRole(i)){var l=[...this.state.secureDownloadRules];l[0].roleRules.permissions.splice(t,1),this.setState({secureDownloadRules:l})}}addExt(e,s,t){var i=[...this.state.secureDownloadRules],l=i[0].roleRules.permissions[e][s].extensions;if(t.target.value.toString().indexOf(",")>=0){var a=this.getValueAsArrayByType(t.target.value,"string");a[0]&&l.indexOf(a[0])<0&&l.push(a[0]),t.target.value=""}this.setState({secureDownloadRules:i}),this.props.setData(this.props.position,!0)}getExt(e,s,t,i){return(0,n.jsxs)("p",{className:"p-1 rounded border border-primary text-primary",children:[e,(0,n.jsxs)("span",{style:x,children:[" ",(0,n.jsx)("button",{type:"button",onClick:this.removeExt.bind(this,s,t,i),class:"btn-close","aria-label":"Close"})]})]})}removeExt(e,s,t,i){var l=[...this.state.secureDownloadRules];l[0].roleRules.permissions[e][t].extensions.splice(s,1),this.setState({secureDownloadRules:l}),this.props.setData(this.props.position,!0)}addFN(e,s,t){var i=[...this.state.secureDownloadRules],l=i[0].roleRules.permissions[e][s].fileNames;if(t.target.value.toString().indexOf(",")>=0){var a=this.getValueAsArrayByType(t.target.value,"string");a[0]&&l.indexOf(a[0])<0&&l.push(a[0]),t.target.value=""}this.setState({secureDownloadRules:i}),this.props.setData(this.props.position,!0)}getFN(e,s,t,i){return(0,n.jsxs)("p",{className:"p-1 rounded border border-primary text-primary",children:[e,(0,n.jsxs)("span",{style:x,children:[" ",(0,n.jsx)("button",{type:"button",onClick:this.removeFN.bind(this,s,t,i),class:"btn-close","aria-label":"Close"})]})]})}removeFN(e,s,t,i){var l=[...this.state.secureDownloadRules];l[0].roleRules.permissions[e][t].fileNames.splice(s,1),this.setState({secureDownloadRules:l}),this.props.setData(this.props.position,!0)}getValueAsArrayByType(e,s){var t=[];if(e.toString().indexOf(",")>=0){var i=e.split(",");switch(s){case"string":t=i;break;case"number":i.map((e=>{t.push(parseInt(e))}))}}else switch(s){case"string":e&&t.push(e);break;case"number":isNaN(e)||t.push(e)}return t}render(){return(0,n.jsxs)(o.xH,{children:[(0,n.jsxs)(o.rb,{className:"m-2 border-bottom d-flex align-items-center",children:[(0,n.jsx)(o.b7,{className:"col-8 pb-2",children:(0,n.jsxs)(o.tj,{children:["Add/Update ",(0,n.jsx)("b",{children:'"Object Storage Service Upload"'})," Permissions"]})}),(0,n.jsxs)(o.b7,{className:"col-4 d-grid gap-2 d-md-flex justify-content-md-end pb-2",children:[(0,n.jsx)(o.u5,{color:"secondary",onClick:this.setVisible.bind(this,!0),children:"Add New Role"}),(0,n.jsx)(o.u5,{color:"info",style:{color:"#fff"},onClick:this.setYesNoVisible.bind(this,!0,"Are you sure you want to save all?","saveAll",[this]),children:"Save All"})]}),(0,n.jsxs)(o.Tk,{visible:this.state.visible,onClose:this.setVisible.bind(this,!1),children:[(0,n.jsx)(o.p0,{children:(0,n.jsx)(o.fl,{children:"Add New Role"})}),(0,n.jsx)(o.sD,{children:(0,n.jsx)(o.jO,{type:"text",placeholder:"Role Name",name:"newRule",id:"newrule"})}),(0,n.jsxs)(o.Ym,{children:[(0,n.jsx)(o.u5,{color:"secondary",onClick:this.setVisible.bind(this,!1),children:"Close"}),(0,n.jsx)(o.u5,{color:"primary",onClick:this.newRuleAdd.bind(this),children:"Create Role"})]})]}),(0,n.jsxs)(o.Tk,{visible:this.state.yesNoVisible,onClose:this.setYesNoVisible.bind(this,!1),children:[(0,n.jsx)(o.p0,{children:(0,n.jsx)(o.fl,{children:this.state.yesNoQuestion})}),(0,n.jsxs)(o.Ym,{children:[(0,n.jsx)(o.u5,{color:"secondary",onClick:this.setYesNoVisible.bind(this,!1,null,null,null,!1),children:"No"}),(0,n.jsx)(o.u5,{color:"primary",onClick:this.setYesNoVisible.bind(this,!1,null,null,null,!0),children:"Yes"})]})]})]}),(0,n.jsx)(o.sl,{style:y,children:this.state.secureDownloadRules.length>0&&this.state.secureDownloadRules[0].roleRules.permissions.map(((e,s)=>(0,n.jsx)(o.xH,{className:"mt-1",children:(0,n.jsxs)(o.sl,{children:[(0,n.jsxs)(o.tj,{children:[(0,n.jsxs)("b",{children:['"',e.role,'"']})," Rules  ",(0,n.jsx)("span",{style:x,children:(0,n.jsx)(o.u5,{color:"danger",onClick:this.setYesNoVisible.bind(this,!0,"Are you sure you want to delete "+e.role+" role?","deleteRole",[e._id,s,this]),style:b,children:"Delete Role"})})]}),(0,n.jsxs)(o.n2,{variant:"tabs",className:"mt-4",role:"tablist",style:m,children:[(0,n.jsx)(o.U6,{children:(0,n.jsx)(o.AQ,{style:m,active:this.getSubActiveKey(this,1,e._id),onClick:this.setSubActiveKey.bind(this,1,e._id),children:"Permitted"})}),(0,n.jsx)(o.U6,{children:(0,n.jsx)(o.AQ,{style:m,active:this.getSubActiveKey(this,2,e._id),onClick:this.setSubActiveKey.bind(this,2,e._id),children:"Non-Permitted"})})]}),(0,n.jsxs)(o.gr,{children:[(0,n.jsxs)(o.IA,{role:"tabpanel",className:"p-3","aria-labelledby":"home-tab",visible:this.getSubActiveKey(this,1,e._id),children:[(0,n.jsxs)(o.xH,{className:"mt-2",children:[(0,n.jsx)(o.bn,{children:(0,n.jsx)(o.tj,{className:"p-2",children:"Extensions"})}),(0,n.jsxs)(o.sl,{children:[(0,n.jsx)(o.rb,{className:"mt-2 pb-2",children:(0,n.jsx)(o.b7,{className:"col-9",children:(0,n.jsx)(o.jO,{type:"text",name:"extension",onChange:this.addExt.bind(this,s,"permitted"),placeholder:"Extensions with comma"})})}),(0,n.jsx)(o.rb,{className:"mt-2",children:e.permitted.extensions.map(((e,t)=>(0,n.jsx)(o.b7,{className:"col-3",children:this.getExt(e,s,t,"permitted")})))})]})]}),(0,n.jsxs)(o.xH,{className:"mt-2",children:[(0,n.jsx)(o.bn,{children:(0,n.jsx)(o.tj,{className:"p-2",children:"FileNames"})}),(0,n.jsxs)(o.sl,{children:[(0,n.jsx)(o.rb,{className:"mt-2 pb-2",children:(0,n.jsx)(o.b7,{className:"col-9",children:(0,n.jsx)(o.jO,{type:"text",name:"fileName",onChange:this.addFN.bind(this,s,"permitted"),placeholder:"FileNames.extension with comma (ex:xx.zip,)"})})}),(0,n.jsx)(o.rb,{className:"mt-2",children:e.permitted.fileNames.map(((e,t)=>(0,n.jsx)(o.b7,{className:"col-3",children:this.getFN(e,s,t,"permitted")})))})]})]})]}),(0,n.jsxs)(o.IA,{role:"tabpanel",className:"p-3","aria-labelledby":"profile-tab",visible:this.getSubActiveKey(this,2,e._id),children:[(0,n.jsxs)(o.xH,{className:"mt-2",children:[(0,n.jsx)(o.bn,{children:(0,n.jsx)(o.tj,{className:"p-2",children:"Extensions"})}),(0,n.jsxs)(o.sl,{children:[(0,n.jsx)(o.rb,{className:"mt-2 pb-2",children:(0,n.jsx)(o.b7,{className:"col-9",children:(0,n.jsx)(o.jO,{type:"text",name:"extension",onChange:this.addExt.bind(this,s,"nonPermitted"),placeholder:"Extensions with comma"})})}),(0,n.jsx)(o.rb,{className:"mt-2",children:e.nonPermitted.extensions.map(((e,t)=>(0,n.jsx)(o.b7,{className:"col-3",children:this.getExt(e,s,t,"nonPermitted")})))})]})]}),(0,n.jsxs)(o.xH,{className:"mt-2",children:[(0,n.jsx)(o.bn,{children:(0,n.jsx)(o.tj,{className:"p-2",children:"FileNames"})}),(0,n.jsxs)(o.sl,{children:[(0,n.jsx)(o.rb,{className:"mt-2 pb-2",children:(0,n.jsx)(o.b7,{className:"col-9",children:(0,n.jsx)(o.jO,{type:"text",name:"fileName",onChange:this.addFN.bind(this,s,"nonPermitted"),placeholder:"FileNames.extension with comma (ex:xx.zip,)"})})}),(0,n.jsx)(o.rb,{className:"mt-2",children:e.nonPermitted.fileNames.map(((e,t)=>(0,n.jsx)(o.b7,{className:"col-3",children:this.getFN(e,s,t,"nonPermitted")})))})]})]})]})]})]})})))})]})}}const j=g;var v=t(4880);const R={cursor:"pointer",color:"rgba(33, 37, 41,0.8)","background-color":"#fff"},N={cursor:"pointer","background-color":"rgba(33, 37, 41,0.8)",color:"#fff"};var w="";class f extends i.Component{constructor(e){super(e),this.state={permissionItems:["Upload","Secure Download"],collectionCreateRules:[],activeKey:1,activeSubKeys:[1,1,1,1,1],subKeys:[],redirect:!1,sendApp:!1,lists:[!1,!1],visible:!1,yesNoVisible:!1,yesNoQuestion:"",arguments:[],sendType:""},this.handleRedirect=this.handleRedirect.bind(this),this.newRuleAdd=this.newRuleAdd.bind(this),this.deleteRole=this.deleteRole.bind(this),this.addUpdateRule=this.addUpdateRule.bind(this),this.getRules=this.getRules.bind(this),this.toastShow=this.toastShow.bind(this),this.setData=this.setData.bind(this)}setActiveKey(e){return 0=={...this.state.lists}[this.state.activeKey-1]?this.setState({activeKey:e}):this.setYesNoVisible(!0,"Are you sure you want to discard all changes?","cancel",[e,this.state.activeKey]),!1}async setData(e,s){var t={...this.state.lists};t[e-1]=s,this.setState({lists:t})}async setYesNoVisible(e,s,t,i,l){if(e)this.setState({yesNoVisible:e,yesNoQuestion:s,sendType:t,arguments:i});else{if(l)if("cancel"===this.state.sendType){var a={...this.state.lists};a[this.state.arguments[1]-1]=!1,await this.setState({activeKey:this.state.arguments[0],lists:a})}this.setState({yesNoVisible:e,yesNoQuestion:"",sendType:"",arguments:[]})}}handleRedirectApp(){this.state.sendApp||this.setState({sendApp:!0})}componentDidMount(){for(var e=["clientId","organizationId","applicationId"],s=0;s<e.length;++s){var t=e[s];if(null==localStorage.getItem(t)||""==localStorage.getItem(t))return void this.handleRedirect()}var i=["appId","orgId"];for(s=0;s<i.length;++s){t=i[s];if(null==localStorage.getItem(t)||""==localStorage.getItem(t))return void this.handleRedirectApp()}Date.now()/1e3-localStorage.getItem("timeout")/1e3>3600&&(localStorage.setItem("token",""),this.handleRedirect())}handleRedirect(e){this.state.redirect||this.setState({redirect:!0})}async newRuleAdd(e){var s=document.getElementById("newrule");if(!s.value)return this.toastShow("error","Role Name cannot be null or empty!"),!1;var t=!0;await(0,l.Rd)(e,l.fq.AddUpdateRules).then((function(e){t=e.success,w=1==e.success?"Role Rule Created!":e.message}),(e=>{401==e.status?this.handleRedirect():(t=!1,w=e.message)}));var i=t?"success":"error";return this.toastShow(i,w),s.value="",!0}async deleteRole(e){var s=!1;await(0,l.Rd)(e,l.fq.DeleteRule).then((function(e){s=e.success,w=1==e.success?"Role Deleted":e.message}),(e=>{401==e.status?this.handleRedirect():(s=!1,w=e.message)}));var t=s?"success":"error";return this.toastShow(t,w),!!s}async addUpdateRule(e){console.log(e);var s=!0;await(0,l.Rd)(e,l.fq.AddUpdateRules).then((function(e){s=e.success,w=1==e.success?"Saved!":e.message}),(e=>{401==e.status?this.handleRedirect():(s=!1,w=e.message)}));var t=s?"success":"error";this.toastShow(t,w)}async getRules(e){var s=[];return await(0,l.Rd)(e,l.fq.GetRules).then((function(e){e.length>0&&e[0].hasOwnProperty("roleRules")&&(s=e)}),(e=>{401==e.status?this.handleRedirect():(!1,w=e.message)})),s}toastShow(e,s){switch(e){case"success":a.Am.success(s,{position:"bottom-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,theme:"dark",transition:a.Mi});break;case"error":a.Am.error(s,{position:"bottom-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,theme:"dark",transition:a.Mi});break;case"info":a.Am.info(s,{position:"bottom-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,theme:"dark",transition:a.Mi})}}render(){const{redirect:e}=this.state,{sendApp:s}=this.state;return e?(0,n.jsx)(v.l_,{to:"/login"}):s?(0,n.jsx)(v.l_,{to:"/applications"}):(0,n.jsxs)(o.KB,{className:"p-5",children:[(0,n.jsxs)(o.Tk,{visible:this.state.yesNoVisible,onClose:this.setYesNoVisible.bind(this,!1),children:[(0,n.jsx)(o.p0,{children:(0,n.jsx)(o.fl,{children:this.state.yesNoQuestion})}),(0,n.jsxs)(o.Ym,{children:[(0,n.jsx)(o.u5,{color:"secondary",onClick:this.setYesNoVisible.bind(this,!1,null,null,null,!1),children:"No"}),(0,n.jsx)(o.u5,{color:"primary",onClick:this.setYesNoVisible.bind(this,!1,null,null,null,!0),children:"Yes"})]})]}),(0,n.jsx)(a.Ix,{}),(0,n.jsxs)(o.rb,{children:[(0,n.jsx)(o.b7,{className:"col-3",children:(0,n.jsx)(o.n2,{className:"flex-column",role:"tablist",style:R,children:this.state.permissionItems.map(((e,s)=>(0,n.jsx)(o.U6,{children:(0,n.jsx)(o.AQ,{style:this.state.activeKey===s+1?N:R,active:this.state.activeKey===s+1,onClick:this.setActiveKey.bind(this,s+1),children:e})})))})}),(0,n.jsx)(o.b7,{className:"col-9 justify-content-center",children:(0,n.jsxs)(o.gr,{children:[(0,n.jsx)(o.IA,{role:"tabpanel","aria-labelledby":"home-tab",visible:1===this.state.activeKey,children:1===this.state.activeKey&&(0,n.jsx)(p,{handleRedirect:this.handleRedirect,newRuleAdd:this.newRuleAdd,deleteRole:this.deleteRole,addUpdateRule:this.addUpdateRule,getRules:this.getRules,toastShow:this.toastShow,setData:this.setData,position:1})}),(0,n.jsx)(o.IA,{role:"tabpanel","aria-labelledby":"home-tab",visible:2===this.state.activeKey,children:2===this.state.activeKey&&(0,n.jsx)(j,{handleRedirect:this.handleRedirect,newRuleAdd:this.newRuleAdd,deleteRole:this.deleteRole,addUpdateRule:this.addUpdateRule,getRules:this.getRules,toastShow:this.toastShow,setData:this.setData,position:2})})]})})]})]})}}const S=f},6898:(e,s,t)=>{t(2791),t(184)}}]);
//# sourceMappingURL=129.302ea9fc.chunk.js.map