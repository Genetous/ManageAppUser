"use strict";(self.webpackChunkgenetous_manage_apps=self.webpackChunkgenetous_manage_apps||[]).push([[981],{5242:(e,t,a)=>{a.r(t),a.d(t,{Configs:()=>p,default:()=>b});var s=a(2791),i=a(4889),n=a(577),r=(a(5462),a(4880)),l=a(8983),o=a(184);const d={cursor:"pointer"},c={float:"right"};var h="Unexpected Error Occured!";class p extends s.Component{constructor(e){super(e),this.state={data:{minioCredentials:{uri:"",password:"",username:""},dbData:{clusters:[],userpass:"",username:""},neoCredentials:{uri:"",password:"",username:""},rabbitCredentials:{host:"",ipaddress:"",password:"",username:""},permittedExtensions:[],jobDbData:{clusters:[],userpass:"",username:""}},appSecret:"",activeKey:1,redirect:!1,sendApp:!1}}handleRedirectApp(){this.state.sendApp||this.setState({sendApp:!0})}handleRedirect(){this.state.redirect||this.setState({redirect:!0})}componentDidMount(){for(var e=["clientId","organizationId","applicationId"],t=0;t<e.length;++t){var a=e[t];if(null==localStorage.getItem(a)||""==localStorage.getItem(a))return void this.handleRedirect()}var s=["appId","orgId"];for(t=0;t<s.length;++t){a=s[t];if(null==localStorage.getItem(a)||""==localStorage.getItem(a))return void this.handleRedirectApp()}Date.now()/1e3-localStorage.getItem("timeout")/1e3>3600?(localStorage.setItem("token",""),this.handleRedirect()):this.getConfigs()}async getConfigs(){var e={organizationId:localStorage.getItem("orgId"),applicationId:localStorage.getItem("appId")},t={...this.state.data},a=!0;await(0,i.Rd)(e,i.fq.GetConfigs).then((function(e){1==e.success&&(t=e.data)}),(e=>{401==e.status?this.handleRedirect():404==e.status?a=!0:(a=!1,h=e.message)})),a||this.toastShow("error",h),this.setState({data:t}),this.getAppSecret()}async getAppSecret(){var e={organizationId:localStorage.getItem("orgId"),applicationId:localStorage.getItem("appId")},t={...this.state.data},a=!0;await(0,i.Rd)(e,i.fq.GetAppSecret).then((function(e){1==e.success&&(t=e.data.clientSecret)}),(e=>{401==e.status?this.handleRedirect():(a=!1,h=e.message)})),a||this.toastShow("error",h),this.setState({appSecret:t})}setActiveKey(e){return this.setState({activeKey:e}),!1}changeData(e,t){const{data:a}=this.state;a[e][t.target.name]=t.target.value,this.setState({data:a})}createPermittedList(e){return(0,o.jsxs)("li",{className:"row p-2",children:[(0,o.jsx)("div",{class:"col-sm-10 border-bottom",children:e}),(0,o.jsx)("div",{class:"col-sm-2",children:(0,o.jsx)("button",{name:e,onClick:this.removeItem.bind(this),type:"button",class:"btn-close","aria-label":"Close"})})]})}async addExt(e){var t=e.target.value;if(t.indexOf(",")>0){t=t.slice(0,-1);const{data:s}=this.state;var a=s.permittedExtensions;a.indexOf(t)<0?(a.push(t),s.permittedExtensions=a,await this.setState({data:s}),e.target.value=""):e.target.value=t}}async removeItem(e){const{data:t}=this.state;var a=t.permittedExtensions;let s=a.indexOf(e.target.name);a.splice(s,1),t.permittedExtensions=a,await this.setState({data:t})}async saveAll(e){this.toastShow("info","Processing...");var t=this.state.data,a=localStorage.getItem("orgId"),s=localStorage.getItem("appId");t.organizationId=a,t.applicationId=s;var n=!0;await(0,i.Rd)(t,i.fq.AddConfigs).then((function(e){n=e.success,h=1==e.success?"Saved!":e.message}),(e=>{401==e.status?this.handleRedirect():(n=!1,h=e.message)}));var r=n?"success":"error";this.toastShow(r,h)}toastShow(e,t){switch(e){case"success":n.Am.success(t,{position:"bottom-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,theme:"dark",transition:n.Mi});break;case"error":n.Am.error(t,{position:"bottom-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,theme:"dark",transition:n.Mi});break;case"info":n.Am.info(t,{position:"bottom-center",autoClose:1e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,theme:"dark",transition:n.Mi})}}getDbData(e,t,a){return(0,o.jsxs)("p",{className:"p-1 rounded border border-primary text-primary",children:[e,(0,o.jsxs)("span",{style:c,children:[" ",(0,o.jsx)("button",{type:"button",onClick:this.removeDBData.bind(this,t,a),class:"btn-close","aria-label":"Close"})]})]})}removeDBData(e,t){var a={...this.state.data};a[t].clusters.splice(e,1),this.setState({data:a})}changeDBData(e,t){var a={...this.state.data},s=a[e].clusters;if(t.target.value.toString().indexOf(",")>=0){var i=this.getValueAsArrayByType(t.target.value);i[0]&&s.indexOf(i[0])<0&&s.push(i[0]),t.target.value=""}this.setState({data:a})}getValueAsArrayByType(e){var t=[];e.toString().indexOf(",")>=0?t=e.split(","):e&&t.push(e);return t}render(){const{redirect:e,sendApp:t}=this.state;return e?(0,o.jsx)(r.l_,{to:"/login"}):t?(0,o.jsx)(r.l_,{to:"/applications"}):(0,o.jsxs)(l.KB,{className:"p-5",children:[(0,o.jsx)(n.Ix,{}),(0,o.jsx)(l.rb,{className:"justify-content-center",children:(0,o.jsx)(l.b7,{xs:12,children:(0,o.jsxs)(l.xH,{children:[(0,o.jsxs)(l.sl,{children:[(0,o.jsx)(l.tj,{children:"Add/Update Configurations"}),(0,o.jsxs)(l.n2,{variant:"tabs",className:"mt-4",role:"tablist",style:d,children:[(0,o.jsx)(l.U6,{children:(0,o.jsx)(l.AQ,{style:d,active:1===this.state.activeKey,onClick:this.setActiveKey.bind(this,1),children:"Database"})}),(0,o.jsx)(l.U6,{children:(0,o.jsx)(l.AQ,{style:d,active:2===this.state.activeKey,onClick:this.setActiveKey.bind(this,2),children:"Job DB"})}),(0,o.jsx)(l.U6,{children:(0,o.jsx)(l.AQ,{style:d,active:3===this.state.activeKey,onClick:this.setActiveKey.bind(this,3),children:"Minio"})}),(0,o.jsx)(l.U6,{children:(0,o.jsx)(l.AQ,{style:d,active:4===this.state.activeKey,onClick:this.setActiveKey.bind(this,4),children:"Neo4J"})}),(0,o.jsx)(l.U6,{children:(0,o.jsx)(l.AQ,{style:d,active:5===this.state.activeKey,onClick:this.setActiveKey.bind(this,5),children:"RabbitMQ"})}),(0,o.jsx)(l.U6,{children:(0,o.jsx)(l.AQ,{style:d,active:6===this.state.activeKey,onClick:this.setActiveKey.bind(this,6),children:"Permitted Extensions"})}),(0,o.jsx)(l.U6,{children:(0,o.jsx)(l.AQ,{style:d,active:7===this.state.activeKey,onClick:this.setActiveKey.bind(this,7),children:"App Secret Key"})})]}),(0,o.jsxs)(l.gr,{children:[(0,o.jsxs)(l.IA,{role:"tabpanel",className:"p-3","aria-labelledby":"home-tab",visible:1===this.state.activeKey,children:[(0,o.jsx)(l.jO,{className:"mb-2",type:"text",id:"title",name:"title",label:"MongoDB or PostgreSQL Uri Title",placeholder:"ex: mongodb+srv:// - mongodb:// - postgresql://",value:null!=this.state.data.dbData.title?this.state.data.dbData.title:"",onChange:this.changeData.bind(this,"dbData")}),(0,o.jsx)(l.jO,{className:"mb-2",type:"text",id:"cluster",name:"cluster",label:"MongoDB or PostgreSQL Clusters Host Address with Port",placeholder:"ex: 127.0.0.1:27017,",onChange:this.changeDBData.bind(this,"dbData")}),(0,o.jsx)(l.rb,{className:"mt-2",children:null!=this.state.data.dbData.clusters&&this.state.data.dbData.clusters.map(((e,t)=>(0,o.jsx)(l.b7,{className:"col-3",children:this.getDbData(e,t,"dbData")})))}),(0,o.jsx)(l.jO,{className:"mb-2",type:"text",id:"options",name:"options",label:"MongoDB Clusters Connection Options",placeholder:"ex: retryWrites=true&w=majority",value:null!=this.state.data.dbData.options?this.state.data.dbData.options:"",onChange:this.changeData.bind(this,"dbData")}),(0,o.jsx)(l.jO,{className:"mb-2",type:"text",id:"username",name:"username",label:"MongoDB or PostgreSQL Username",placeholder:"John",value:this.state.data.dbData.username,"aria-describedby":"exampleFormControlInputHelpInline",onChange:this.changeData.bind(this,"dbData"),autoComplete:"new-username"}),(0,o.jsx)(l.jO,{type:"password",id:"userpass",name:"userpass",label:"MongoDB or PostgreSQL Password",placeholder:"******",value:this.state.data.dbData.userpass,"aria-describedby":"exampleFormControlInputHelpInline",onChange:this.changeData.bind(this,"dbData"),autoComplete:"new-password"})]}),(0,o.jsxs)(l.IA,{role:"tabpanel",className:"p-3","aria-labelledby":"profile-tab",visible:2===this.state.activeKey,children:[(0,o.jsx)(l.jO,{type:"text",id:"title",name:"title",label:"MongoDB or PostgreSQL Uri Title",placeholder:"ex: mongodb+srv:// - mongodb:// - postgresql://",className:"mb-2",value:null!=this.state.data.jobDbData.title?this.state.data.jobDbData.title:"",onChange:this.changeData.bind(this,"jobDbData")}),(0,o.jsx)(l.jO,{type:"text",id:"cluster",name:"cluster",label:"MongoDB or PostgreSQL Clusters Host Address with Port",placeholder:"ex: 127.0.0.1:27017,",className:"mb-2","aria-describedby":"exampleFormControlInputHelpInline",onChange:this.changeDBData.bind(this,"jobDbData")}),(0,o.jsx)(l.rb,{className:"mt-2",children:null!=this.state.data.jobDbData.clusters&&this.state.data.jobDbData.clusters.map(((e,t)=>(0,o.jsx)(l.b7,{className:"col-3",children:this.getDbData(e,t,"jobDbData")})))}),(0,o.jsx)(l.jO,{type:"text",id:"options",name:"options",label:"MongoDB Clusters Connection Options",placeholder:"ex: retryWrites=true&w=majority",className:"mb-2",value:null!=this.state.data.jobDbData.options?this.state.data.jobDbData.options:"",onChange:this.changeData.bind(this,"jobDbData")}),(0,o.jsx)(l.jO,{className:"mb-2",type:"text",id:"username",name:"username",label:"MongoDB or PostgreSQL Username",placeholder:"John",value:this.state.data.jobDbData.username,"aria-describedby":"exampleFormControlInputHelpInline",onChange:this.changeData.bind(this,"jobDbData"),autoComplete:"new-username"}),(0,o.jsx)(l.jO,{type:"password",id:"userpass",name:"userpass",label:"MongoDB or PostgreSQL Password",placeholder:"******",value:this.state.data.jobDbData.userpass,"aria-describedby":"exampleFormControlInputHelpInline",onChange:this.changeData.bind(this,"jobDbData"),autoComplete:"new-password"})]}),(0,o.jsxs)(l.IA,{role:"tabpanel",className:"p-3","aria-labelledby":"contact-tab",visible:3===this.state.activeKey,children:[(0,o.jsx)(l.jO,{type:"text",id:"uri",name:"uri",label:"Minio Address",placeholder:"http://127.0.0.1:9000",value:this.state.data.minioCredentials.uri,text:"Minio Address with Port Number","aria-describedby":"exampleFormControlInputHelpInline",onChange:this.changeData.bind(this,"minioCredentials")}),(0,o.jsx)(l.jO,{type:"text",id:"username",name:"username",label:"Username",placeholder:"John",value:this.state.data.minioCredentials.username,text:"Minio Credentials Username","aria-describedby":"exampleFormControlInputHelpInline",onChange:this.changeData.bind(this,"minioCredentials"),autoComplete:"new-username"}),(0,o.jsx)(l.jO,{type:"password",id:"password",name:"password",label:"Password",placeholder:"******",value:this.state.data.minioCredentials.password,text:"Minio Credentials Password","aria-describedby":"exampleFormControlInputHelpInline",onChange:this.changeData.bind(this,"minioCredentials")})]}),(0,o.jsxs)(l.IA,{role:"tabpanel",className:"p-3","aria-labelledby":"contact-tab",visible:4===this.state.activeKey,children:[(0,o.jsx)(l.jO,{type:"text",id:"uri",name:"uri",label:"Neo4J Address",placeholder:"bolt://localhost:7687",value:this.state.data.neoCredentials.uri,text:"Neo4J Address with Port Number","aria-describedby":"exampleFormControlInputHelpInline",onChange:this.changeData.bind(this,"neoCredentials")}),(0,o.jsx)(l.jO,{type:"text",id:"username",name:"username",label:"Username",placeholder:"John",value:this.state.data.neoCredentials.username,text:"Neo4J Credentials Username","aria-describedby":"exampleFormControlInputHelpInline",onChange:this.changeData.bind(this,"neoCredentials"),autoComplete:"new-username"}),(0,o.jsx)(l.jO,{type:"password",id:"password",name:"password",label:"Password",placeholder:"******",value:this.state.data.neoCredentials.password,text:"Neo4J Credentials Password","aria-describedby":"exampleFormControlInputHelpInline",onChange:this.changeData.bind(this,"neoCredentials")})]}),(0,o.jsxs)(l.IA,{role:"tabpanel",className:"p-3","aria-labelledby":"contact-tab",visible:5===this.state.activeKey,children:[(0,o.jsx)(l.jO,{type:"text",id:"ipaddress",name:"ipaddress",label:"RabbitMQ IP Address",placeholder:"127.0.0.1",value:this.state.data.rabbitCredentials.ipaddress,text:"","aria-describedby":"exampleFormControlInputHelpInline",onChange:this.changeData.bind(this,"rabbitCredentials")}),(0,o.jsx)(l.jO,{type:"text",id:"username",name:"username",label:"Username",placeholder:"John",value:this.state.data.rabbitCredentials.username,text:"RabbitMQ Credentials Username","aria-describedby":"exampleFormControlInputHelpInline",onChange:this.changeData.bind(this,"rabbitCredentials"),autoComplete:"new-username"}),(0,o.jsx)(l.jO,{type:"password",id:"userpass",name:"password",label:"Password",placeholder:"******",value:this.state.data.rabbitCredentials.password,text:"RabbitMQ Credentials Password","aria-describedby":"exampleFormControlInputHelpInline",onChange:this.changeData.bind(this,"rabbitCredentials"),autoComplete:"new-password"}),(0,o.jsx)(l.jO,{type:"text",id:"host",name:"host",label:"Virtual Host",placeholder:"demohost",value:this.state.data.rabbitCredentials.host,text:"RabbitMQ Created Virtual Host","aria-describedby":"exampleFormControlInputHelpInline",onChange:this.changeData.bind(this,"rabbitCredentials")})]}),(0,o.jsxs)(l.IA,{role:"tabpanel",className:"p-3","aria-labelledby":"contact-tab",visible:6===this.state.activeKey,children:[(0,o.jsx)(l.jO,{type:"text",id:"ext",name:"ext",label:"Add Extensions",placeholder:"txt",text:"Add extensions with comma for Object Storage Service ex:(txt,png)","aria-describedby":"exampleFormControlInputHelpInline",onChange:this.addExt.bind(this)}),(0,o.jsx)("ul",{className:"w-75 p-3",children:this.state.data.permittedExtensions.map(((e,t)=>this.createPermittedList(e)))})]}),(0,o.jsx)(l.IA,{role:"tabpanel",className:"p-3","aria-labelledby":"contact-tab",visible:7===this.state.activeKey,children:(0,o.jsx)(l.jO,{type:"text",id:"appSecret",name:"appSecret",label:"App Secret Key",placeholder:"txt",disabled:!0,value:this.state.appSecret})})]})]}),(0,o.jsx)("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end",children:(0,o.jsx)(l.u5,{color:"primary",className:"m-2",onClick:this.saveAll.bind(this),children:"Save All"})})]})})})]})}}const b=p}}]);
//# sourceMappingURL=981.62100caf.chunk.js.map